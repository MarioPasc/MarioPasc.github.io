<script>
const form  = document.querySelector('#subscribe-cta form');
const btn   = form.querySelector('input[type=submit]');

form.addEventListener('submit', e => {
  e.preventDefault();
  const email = form.EMAIL.value.trim();
  if (!email) return;

  btn.classList.add('pulse');
  btn.disabled = true;
  btn.value = 'Waitâ€¦';

  const url = `https://github.us21.list-manage.com/subscribe/post-json
               ?u=YOUR_U_ID&id=YOUR_LIST_ID&c=?&EMAIL=${encodeURIComponent(email)}`.replace(/\s/g,'');

  // JSONP: create temporary <script>
  window.mcCallback = data => {
    btn.classList.remove('pulse');
    if (data.result === 'success') {
      btn.value = 'Done!';
      btn.disabled = true;
      /* append your injected success <p> exactly like before */
    } else {
      btn.value = 'Subscribe';
      btn.disabled = false;
      /* show data.msg inside your red error <p> */
    }
    delete window.mcCallback;
    script.remove();
  };

  const script = document.createElement('script');
  script.src = url.replace('&c=?', `&c=mcCallback`);
  document.body.appendChild(script);
});
</script>
