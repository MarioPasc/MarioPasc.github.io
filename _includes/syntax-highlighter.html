<!-- Syntax Highlighter for Code Blocks -->
<style>
.code-block {
  background: #f8f8f8;
  border: 1px solid #e1e1e1;
  border-radius: 4px;
  padding: 1rem;
  margin: 1rem 0;
  overflow-x: auto;
  font-family: 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.4;
}

.code-block .keyword { color: #0066cc; font-weight: bold; }
.code-block .string { color: #009900; }
.code-block .comment { color: #666666; font-style: italic; }
.code-block .number { color: #ff6600; }
.code-block .function { color: #cc0066; font-weight: bold; }
.code-block .operator { color: #333333; font-weight: bold; }
.code-block .preprocessor { color: #990099; }
</style>

<script>
function highlightCode() {
  document.querySelectorAll('pre code, .code-block code, code[data-lang]').forEach(function(block) {
    let lang = block.getAttribute('data-lang') || block.className.replace('language-', '') || 'python';
    let code = block.textContent || block.innerText; // Use textContent to avoid HTML conflicts

    if (lang === 'python') {
      // Process in order: comments, strings, then keywords
      code = code.replace(/(#.*$)/gm, '<span class="comment">$1</span>');
      code = code.replace(/(['"])((?:\\.|(?!\1)[^\\])*)\1/g, '<span class="string">$1$2$1</span>');
      code = code.replace(/\b(def|class|if|else|elif|for|while|try|except|import|from|return|break|continue|pass|lambda|with|as|in|not|and|or|is|None|True|False)\b/g, '<span class="keyword">$1</span>');
      code = code.replace(/\b(\d+\.?\d*)\b/g, '<span class="number">$1</span>');
    } else if (lang === 'cpp') {
      code = code.replace(/(\/\/.*$|\/\*[\s\S]*?\*\/)/gm, '<span class="comment">$1</span>');
      code = code.replace(/(["'])((?:\\.|(?!\1)[^\\])*)\1/g, '<span class="string">$1$2$1</span>');
      code = code.replace(/\b(int|float|double|char|bool|void|string|if|else|for|while|do|switch|case|break|continue|return|class|struct|public|private|protected|virtual|static|const|namespace|using|include|define|ifdef|ifndef|endif)\b/g, '<span class="keyword">$1</span>');
      code = code.replace(/\b(\d+\.?\d*f?)\b/g, '<span class="number">$1</span>');
      code = code.replace(/(#\w+)/g, '<span class="preprocessor">$1</span>');
    }
    
    block.innerHTML = code;
  });
}

document.addEventListener('DOMContentLoaded', highlightCode);
</script>