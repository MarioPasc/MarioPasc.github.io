// Code block component styles (self-contained, safe if site variables are missing)

// Fallback variables (overridden if already defined elsewhere)
$spacing-sm: 0.5rem !default;
$spacing-md: 0.75rem !default;
$color-code-bg: #0b1021 !default;         // dark-ish background
$color-border: #2b2f3a !default;
$color-border-light: #3a3f4b !default;
$color-code-fg: #000000 !default;         // main code color
$color-code-keyword: #c678dd !default;    // purple
$color-code-string: #98c379 !default;     // green
$color-code-comment: #5c6370 !default;    // grey
$color-code-number: #d19a66 !default;     // orange
$color-code-builtin: #61afef !default;    // blue

.code-block {
  background: $color-code-bg;
  border: 1px solid $color-border;
  border-radius: 4px;
  margin: $spacing-md 0;
  overflow-x: auto;
  position: relative;

  // The <code> is block-level and preserves whitespace exactly
  code {
    display: block;
    padding: $spacing-md;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 0.9rem;
    line-height: 1.5;
    color: $color-code-fg;

    // CRUCIAL: preserve indentation and newlines (no soft wrap)
    white-space: pre;
    tab-size: 4; // better tab rendering
  }

  // Optional top-right language tag (if you ever add one)
  &::after {
    content: attr(data-lang);     // ‚Üê read from the container attribute
    position: absolute;
    top: 0.25rem;
    right: 0.4rem;
    font-size: 0.65rem;
    opacity: 0.7;
    padding: 0.15rem 0.35rem;
    border-radius: 3px;
    border: 1px solid $color-border-light;
    text-transform: uppercase;
    pointer-events: none;
  }


  // Token colours
  .keyword   { color: $color-code-keyword; font-weight: 600; }
  .string    { color: $color-code-string; }
  .comment   { color: $color-code-comment; font-style: italic; }
  .number    { color: $color-code-number; }
  .built-in  { color: $color-code-builtin; font-weight: 600; }
  .preprocessor { color: $color-code-keyword; }
}
